# ì»´íŒŒì¼ë£¸ (Compile-Room)

ì „ì£¼ëŒ€í•™êµ ì»´í“¨í„°ê³µí•™ê³¼ í•™ìƒë“¤ì„ ìœ„í•œ ìë£Œ ì•„ì¹´ì´ë¸ŒÂ·ê²Œì‹œíŒ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤. Next.js 16(App Router) + Prisma + NextAuth ê¸°ë°˜ì´ë©°, í˜„ì¬ ëª¨ë“  ì½”ë“œëŠ” JavaScriptë¡œ ì‘ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

---

### ì™œ ë§Œë“¤ì—ˆë‚˜ìš”?
- í•™ê³¼ ìë£ŒÂ·ê³¼ì œÂ·ì‹œí—˜ ëŒ€ë¹„ ìë£Œë¥¼ í•œ ê³³ì— ëª¨ì•„ ê²€ìƒ‰/ë‹¤ìš´ë¡œë“œí•  ìˆ˜ ìˆë„ë¡.
- ìŠ¤í„°ë”” ê³µì§€, í›„ê¸° ë“±ì„ ê²Œì‹œíŒìœ¼ë¡œ ê³µìœ í•´ ì§€ì‹ ìˆœí™˜ì„ ì´‰ì§„í•˜ë„ë¡.
- macOS/Ubuntu ì–´ë””ì„œë“  ë™ì¼í•œ JS ìŠ¤íƒìœ¼ë¡œ ê°œë°œÂ·ìš´ì˜í•˜ê¸° ì‰½ê²Œ ë‹¨ìˆœí™”.

---

### âœ¨ í•µì‹¬ ê¸°ëŠ¥
- **ìë£Œ ê²€ìƒ‰/ë‹¤ìš´ë¡œë“œ**: í‚¤ì›Œë“œ ê²€ìƒ‰, ì¢‹ì•„ìš”/ì¦ê²¨ì°¾ê¸°, ë‹¤ìš´ë¡œë“œ ì§‘ê³„.
- **ìë£Œ ì—…ë¡œë“œ**: PDF/PNG/JPG 3MB ì´í•˜ ì—…ë¡œë“œ, ê³¼ëª©/ì¹´í…Œê³ ë¦¬/ì„¤ëª… ë“±ë¡.
- **ê²Œì‹œíŒ**: ì¹´í…Œê³ ë¦¬ë³„ ê¸€ ì‘ì„±, ëŒ“ê¸€, ì¢‹ì•„ìš”/ì¦ê²¨ì°¾ê¸°, ì¡°íšŒìˆ˜ ì§‘ê³„.
- **ì•Œë¦¼**: ì¢‹ì•„ìš”/ì¦ê²¨ì°¾ê¸° ë“± ì•Œë¦¼ì„ ë²¨ ì•„ì´ì½˜ìœ¼ë¡œ í™•ì¸Â·ì½ìŒ ì²˜ë¦¬.
- **í”„ë¡œí•„ ê´€ë¦¬**: ì´ë¦„/í•™ë²ˆ/í•™ë…„ ìˆ˜ì •, ê³„ì • ì‚­ì œ.
- **í•™ê³¼ ì •ë³´ í—ˆë¸Œ**: í•™ê³¼ ê°œìš”, í•™ë…„ë³„ êµìœ¡ê³¼ì •, ì¶”ì²œ ê³¼ëª©/í™œë™, í•™ì¹™/ìˆ˜ê°•í¸ëŒ ë§í¬.
- **ì˜¨ë³´ë”©Â·ì¹´ìš´íŠ¸ë‹¤ìš´**: ì²« ë°©ë¬¸ ì•ˆë‚´ ëª¨ë‹¬ê³¼ í•™ì‚¬ ì¼ì • ì¹´ìš´íŠ¸ë‹¤ìš´ ì œê³µ.

---

### ğŸ‘¤ ì²´í—˜ìš© ê³„ì •
| ì´ë¦„ | ì´ë©”ì¼ | ë¹„ë°€ë²ˆí˜¸ |
| --- | --- | --- |
| ê¹€í˜„ë¯¼ | `hyunmin@compileroom.com` | `compileroom123` |
| ìµœì¤€í˜ | `junhyeok@compileroom.com` | `compileroom123` |
| ì´ì€ìš° | `eunwoo@compileroom.com` | `compileroom123` |
| ì •ì°¬í˜¸ | `chanho@compileroom.com` | `compileroom123` |
> ë¡œê·¸ì¸ í›„ í”„ë¡œí•„ì—ì„œ í•™ë²ˆ/í•™ë…„ì„ ììœ ë¡­ê²Œ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

### ğŸ” ìš´ì˜ ë° ë³´ì•ˆ
- ê°œì¸ì •ë³´(í•™ë²ˆ ë“±)ëŠ” ì•”í˜¸í™”í•´ ì €ì¥í•˜ê³  ì„¸ì…˜ì€ NextAuthë¡œ ê´€ë¦¬.
- ì—…ë¡œë“œ: PDF/PNG/JPG 3MB ì´í•˜, íŒŒì¼ëª… ì •ê·œí™”.
- ìš”ì²­ ì œí•œ: ë©”ëª¨ë¦¬ ê¸°ë°˜ rate limitìœ¼ë¡œ ë¹„ì •ìƒ íŠ¸ë˜í”½ ì°¨ë‹¨.
- ì¶”ê°€ ê³¼ê¸ˆ ì—†ìŒ(ì™¸ë¶€ ìœ ë£Œ API ë¯¸ì‚¬ìš©).

---

### ğŸ—‚ï¸ í”„ë¡œì íŠ¸ êµ¬ì¡° (ì£¼ìš” ë””ë ‰í„°ë¦¬)
```
src/
 â”œâ”€ app/                       # App Router í˜ì´ì§€ & API
 â”‚   â”œâ”€ page.jsx               # ë©”ì¸(ê²€ìƒ‰/í†µê³„/ì—…ë¡œë“œ CTA)
 â”‚   â”œâ”€ about/                 # ì„œë¹„ìŠ¤ ì†Œê°œ
 â”‚   â”œâ”€ login/, register/      # ì¸ì¦ í˜ì´ì§€
 â”‚   â”œâ”€ upload/                # ìë£Œ ì—…ë¡œë“œ
 â”‚   â”œâ”€ posts/, posts/[id]/    # ê²Œì‹œíŒ ëª©ë¡/ìƒì„¸
 â”‚   â”œâ”€ materials/[id]/        # ìë£Œ ìƒì„¸/ëŒ“ê¸€/ë‹¤ìš´ë¡œë“œ
 â”‚   â”œâ”€ profile/               # í”„ë¡œí•„ ë° ê³„ì • ì‚­ì œ
 â”‚   â”œâ”€ department/            # í•™ê³¼ ì •ë³´ í—ˆë¸Œ
 â”‚   â””â”€ api/                   # auth, upload, materials, posts, comments,
 â”‚                             # notifications, profile ë“± Route Handlers
 â”œâ”€ components/                # Header/Footer, ê²€ìƒ‰/ì—…ë¡œë“œ/ì‘ì„± í¼, ì•Œë¦¼,
 â”‚                             # ì¹´ìš´íŠ¸ë‹¤ìš´, í†µê³„, ì¹´ë“œ ë“± UI ì»´í¬ë„ŒíŠ¸
 â”œâ”€ data/department.js         # í•™ê³¼/êµìœ¡ê³¼ì • ì •ì  ë°ì´í„°
 â”œâ”€ lib/                       # Prisma, Auth, í¬ë§·í„°, ì•”í˜¸í™”, ìë£Œ/ê²Œì‹œíŒ í—¬í¼
 â”œâ”€ constants/material.js      # ìë£Œ íƒ€ì… ë¼ë²¨/ê°’
 â”œâ”€ utils/alias.js             # ìµëª… ë‹‰ë„¤ì„ ìœ í‹¸
 â””â”€ public/                    # ë¡œê³  ë° ì •ì  ìì‚°
prisma/
 â”œâ”€ schema.prisma              # DB ìŠ¤í‚¤ë§ˆ
 â””â”€ migrations/                # ë§ˆì´ê·¸ë ˆì´ì…˜ ê¸°ë¡
scripts/
 â”œâ”€ seed.mjs                   # ì´ˆê¸° ë°ì´í„° ìƒì„±
 â”œâ”€ setup-local-https.sh       # mkcertë¡œ ë¡œì»¬ HTTPS ì¸ì¦ì„œ ìƒì„±
 â””â”€ deploy.sh                  # CI/ë¹Œë“œ/pm2 ì¬ì‹œì‘ ìë™í™”
```

---

### ğŸ“ ì£¼ìš” íŒŒì¼ ì—­í• 
| ê²½ë¡œ | ì„¤ëª… |
| --- | --- |
| `src/app/layout.jsx` | ê³µí†µ ë ˆì´ì•„ì›ƒ, í°íŠ¸/íŒŒë¹„ì½˜, ë©”íƒ€ íƒœê·¸ |
| `src/app/page.jsx` | ë©”ì¸ íˆì–´ë¡œ, ìë£Œ ê²€ìƒ‰, í†µê³„, ì—…ë¡œë“œ CTA |
| `src/app/posts/*.jsx` | ê²Œì‹œíŒ ëª©ë¡/ìƒì„¸, ì¡°íšŒìˆ˜Â·ì„ í˜¸ë„ API |
| `src/app/materials/[id]/page.jsx` | ìë£Œ ìƒì„¸, ë‹¤ìš´ë¡œë“œ/ëŒ“ê¸€/ì¢‹ì•„ìš”/ì¦ê²¨ì°¾ê¸° |
| `src/app/api/*` | ì¸ì¦, ì—…ë¡œë“œ, ìë£Œ/ê²Œì‹œíŒ/ëŒ“ê¸€, ì•Œë¦¼, í”„ë¡œí•„ ë“± API |
| `src/app/department/page.jsx` | í•™ê³¼ ì •ë³´/êµìœ¡ê³¼ì •/ì¶”ì²œ ì •ë³´ |
| `src/components/header.jsx` | ë„¤ë¹„ê²Œì´ì…˜(í™ˆ/ìë£Œ/ê²Œì‹œíŒ/í•™ê³¼), ì•Œë¦¼, ì—…ë¡œë“œ ë²„íŠ¼ |
| `src/components/material-search-bar.jsx` | ìë£Œ ê²€ìƒ‰ ì…ë ¥ ë° ì´ë™ |
| `src/components/upload-form.jsx` | ìë£Œ ì—…ë¡œë“œ í¼ |
| `src/components/create-post-form.jsx` | ê²Œì‹œê¸€ ì‘ì„± í¼ |
| `src/components/notification-bell.jsx` | ì•Œë¦¼ ì¡°íšŒ/ì½ìŒ ì²˜ë¦¬ UI |
| `src/components/countdown-timer.jsx` | í•™ì‚¬ ì¼ì • ì¹´ìš´íŠ¸ë‹¤ìš´ |
| `src/lib/materials.js`, `src/lib/posts.js` | ìë£Œ/ê²Œì‹œíŒ ì¡°íšŒ ë° í†µê³„ í—¬í¼ |
| `scripts/seed.mjs` | ì´ˆê¸° ê³„ì •Â·ìë£ŒÂ·ê²Œì‹œê¸€ ë°ì´í„° ìƒì„± |

---

### âš™ï¸ í™˜ê²½ ë³€ìˆ˜ (.env)
| í‚¤ | ì„¤ëª… |
| --- | --- |
| `DATABASE_URL` | DB ì—°ê²° URL (ê¸°ë³¸ `file:./dev.db`) |
| `AUTH_SECRET` | NextAuth ì„¸ì…˜ ë° ì•”í˜¸í™” í‚¤ |
| `NEXTAUTH_URL` | ì„œë¹„ìŠ¤ URL (ì˜ˆ: `https://compileroom.space`) |
| `CHAT_ENCRYPTION_KEY` | (ì„ íƒ) ì•”í˜¸í™” í—¬í¼ í‚¤, ë¯¸ì„¤ì • ì‹œ `AUTH_SECRET` ì‚¬ìš© |

---

### ğŸ§ª ë¡œì»¬ ê°œë°œ
1) ì˜ì¡´ì„± ì„¤ì¹˜ ë° DB ì´ˆê¸°í™”
```bash
npm install
npx prisma migrate dev
npm run seed   # í…ŒìŠ¤íŠ¸ ë°ì´í„°
```
2) ê°œë°œ ì„œë²„
```bash
npm run dev    # http://localhost:3000
```
3) ë¹Œë“œ í…ŒìŠ¤íŠ¸
```bash
npm run build
```

---

### âš¡ï¸ ì£¼ìš” ìŠ¤í¬ë¦½íŠ¸
| ëª…ë ¹ì–´ | ì„¤ëª… |
| --- | --- |
| `npm run dev` | ê°œë°œ ì„œë²„ ì‹¤í–‰ |
| `npm run dev:https` | mkcert ê¸°ë°˜ ë¡œì»¬ HTTPS ì‹¤í–‰ |
| `npm run seed` | ì´ˆê¸° ë°ì´í„° ìƒì„± |
| `npm run deploy` | ì„œë²„ ë°°í¬ ìë™í™” ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ |

---

### ğŸ” ë¡œì»¬ HTTPS (ì„ íƒ)
```bash
brew install mkcert nss # macOS
sudo apt install libnss3-tools # Ubuntu
npm run dev:https
```
`scripts/setup-local-https.sh`ê°€ ì¸ì¦ì„œ(`certs/localhost.pem`, `localhost-key.pem`)ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.

---

### ğŸš€ ë°°í¬ ìš”ì•½ (Ubuntu)
1) í•„ìˆ˜ íŒ¨í‚¤ì§€ ì„¤ì¹˜: `node 20`, `npm`, `pm2`, `git`  
2) ë ˆí¬ í´ë¡  í›„ `.env` ì‘ì„±  
3) `npm run deploy` ì‹¤í–‰ (migrate/build/pm2 ì¬ì‹œì‘ ìë™ ì§„í–‰)  
4) í•„ìš” ì‹œ Nginx+Certbotìœ¼ë¡œ HTTPS ì„¤ì •
