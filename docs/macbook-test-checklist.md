# 컴파일룸 MacBook 수동 테스트 체크리스트

`구상도/컴파일룸 개인 테스트.md`의 개발 계획을 기준으로 MacBook 환경에서 수행할 일일 수동 테스트 절차를 정리했습니다. Next.js 풀스택 앱이 완성되면 아래 순서를 그대로 따라가며 기능 품질을 확인하세요.

## 1. 사전 준비

1. **개발 도구 확인**  
   - VS Code 최신 버전 설치 및 `code` CLI 활성화.  
   - `git --version`, `node --version (LTS)`, `npm --version`으로 설치 여부 확인.  
   - Homebrew 사용 시 `brew update && brew upgrade node`로 버전 통일.
2. **저장소 동기화**  
   ```bash
   git pull
   npm install
   ```
   - `.env.local`에 Auth.js, Prisma, 파일 업로드 경로 등 팀 공통 환경 변수가 맞는지 확인.
3. **데이터베이스 준비**  
   - `npx prisma migrate dev --name init`으로 `prisma/dev.db` 생성.  
   - `.gitignore`에 `*.db`가 포함됐는지 확인(누락 시 추가).

## 2. 공통 테스트 진행 순서

1. **개발 서버 기동**: `npm run dev` → `http://localhost:3000`.  
2. **테스트 계정 로그인**: Auth.js로 만든 기본 계정(`tester@compileroom.com / test1234` 등)을 사용.  
3. **기준 데이터 준비**: Prisma Studio (`npx prisma studio`)에서 최소 3개의 자료, 2개의 댓글 데이터를 사전에 입력하거나 업로드 플로우로 생성.  
4. **테스트용 파일**: `test-data/` 폴더에 5MB 이하 PDF, PNG 샘플을 둬서 업로드와 다운로드를 반복 검증.

## 3. 기능별 체크리스트

### 3.1 메인 페이지 (`app/page.js`, HTML 시안: `컴파일룸_메인_페이지.html`)

| ID | 시나리오 | 절차 | 기대 결과 |
| --- | --- | --- | --- |
| M01 | 최신 자료 리스트 | 페이지 접속 | 최신순 4개 이상 자료 데이터가 Tailwind 카드 디자인으로 노출 |
| M02 | 인기 자료 박스 | 우측 섹션 확인 | 조회수/좋아요 기준 정렬된 목록 노출, 숫자 포맷 유지 |
| M03 | 검색 바 동작 | 키워드 입력 → Enter | API 호출 후 필터링된 결과가 즉시 반영, 빈 결과 시 안내 문구 |
| M04 | 메인 모달/온보딩 | 첫 방문 후 안내 모달 확인 | 모달이 1회만 뜨고 닫기 후 다시 나타나지 않음 |
| M05 | 반응형 | 375px, 768px, 1280px 뷰포트 | 시안과 동일하게 그리드 레이아웃이 1/2/3열로 변경 |

### 3.2 자료 상세 페이지 (`app/materials/[id]/page.js`, HTML 시안: `...자료_상세_페이지.html`)

| ID | 시나리오 | 절차 | 기대 결과 |
| --- | --- | --- | --- |
| D01 | 페이지 진입 | 최신 자료 카드 클릭 | 해당 `materialId`의 데이터로 제목/설명/작성자/이미지 표시 |
| D02 | 파일 미리보기 | 본문 이미지/프리뷰 영역 확인 | PNG/PDF 미리보기 로드, 실패 시 플레이스홀더 출력 |
| D03 | 다운로드 버튼 | 버튼 클릭 | 파일이 로컬에 저장되고 브라우저 다운로드 로그 생성 |
| D04 | 댓글 작성 | 내용 입력 → 등록 | 빈 값 차단, 저장 후 즉시 목록에 본인 댓글 추가 |
| D05 | 댓글 표기 | 기존 댓글 확인 | 작성자, 학번, 시간 포맷이 계획서 문구와 동일하게 표시 |
| D06 | 권한 제어 | 미로그인 상태에서 댓글 작성 시도 | 로그인 유도 모달/리다이렉트 발생 |

### 3.3 자료 업로드 페이지 (`app/upload/page.js`, HTML 시안: `...자료_업로드_페이지.html`)

| ID | 시나리오 | 절차 | 기대 결과 |
| --- | --- | --- | --- |
| U01 | 접근 권한 | 로그인 없이 접근 | 로그인 페이지 혹은 403 처리 |
| U02 | 폼 검증 | 필수 값 누락 후 제출 | 각 필드 하단에 한국어 에러 메시지 표시 |
| U03 | 파일 선택 | 10MB 이하 PDF 선택 | 파일명 표시, 프리뷰(선택 시) 정상 |
| U04 | 파일 제한 | 50MB 이상 or 비허용 확장자 | 업로드 즉시 차단 및 안내 |
| U05 | 제출 플로우 | 모든 값 입력 → 제출 | 스피너/Disabled 상태 → 성공 토스트 → 상세 페이지 이동 |
| U06 | DB 반영 | 제출 직후 Prisma Studio 확인 | `Material` 레코드 생성, `fileUrl`, `authorId` 저장 |
| U07 | 업로드 폴더 | `public/uploads` 확인 | 실제 파일이 UUID 등으로 저장, 중복 시 덮어쓰기 방지 |

### 3.4 API 및 백엔드

- **Auth.js**: 로그인, 로그아웃, 세션 복구 플로우 각각 실행해 쿠키와 세션 값이 정상인지 확인.  
- **자료 목록 API (`app/api/materials/route.js`)**:  
  - Query 파라미터(`?sort=popular`, `?keyword=`) 조합별 응답 JSON 확인.  
  - Prisma에서 N+1 쿼리가 발생하지 않는지 로그로 검증.  
- **자료 업로드 API (`app/api/upload/route.js`)**:  
  - FormData 전송 시 파일 스트림이 잘려나가지 않는지 `console.log` 대신 `debug` 로거로 확인.  
  - 장애 상황 (디스크 권한, Prisma 에러)에서 4xx/5xx 상태와 사용자 메시지가 일치하는지 확인.  
- **댓글 API (`app/api/comments/route.js`)**:  
  - GET/POST에 대한 입력 검증, rate limiting(필요 시) 확인.

## 4. 테스트 마무리 및 리포트

1. **로그 정리**: `npm run lint`, `npm run test`(있다면) 실행 후 결과 캡처.  
2. **버그 리포트 템플릿**  
   ```
   제목: [기능]/[시나리오] - 요약
   환경: macOS Sonoma 14.x / Node LTS / 브라우저명
   재현 절차:
   1. ...
   2. ...
   기대 결과:
   실제 결과:
   로그/스크린샷:
   ```
3. **GitHub 공유**: 리포트와 스크린샷을 `/docs/testing/YYYY-MM-DD/`에 정리 후 PR 본문에 링크.  
4. **Ubuntu 배포 전 최종 확인**: 로컬에서 모든 체크리스트가 통과했는지 `docs/macbook-test-checklist.md`의 항목에 ✅ 표시 후 배포 진행.

이 문서를 기준으로 팀원 4명이 동일한 MacBook 테스트 절차를 밟을 수 있으며, 새 기능이 추가될 때마다 표를 확장해 관리하면 됩니다.
